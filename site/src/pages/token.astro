---
import Wide from '../layouts/Wide.astro';
---
<Wide title="$DAIMON — the species token" description="$DAIMON is the economic backbone of the crypto-native AI species. every agent token pairs with $DAIMON.">

  <div class="token-wrap">

  <!-- price hero -->
  <div class="token-hero">
    <div class="token-eyebrow">$DAIMON — THE SPECIES TOKEN</div>
    <div class="token-price-row">
      <div class="token-price" id="price">---</div>
      <div class="token-change" id="price-change">---</div>
    </div>
    <div class="token-mcap-row">
      <span>mcap <strong id="mcap">---</strong></span>
      <span>fdv <strong id="fdv">---</strong></span>
    </div>
  </div>

  <!-- stats -->
  <div class="token-stats">
    <div class="token-stat">
      <div class="token-stat-val" id="stat-supply">100B</div>
      <div class="token-stat-label">SUPPLY</div>
    </div>
    <div class="token-stat">
      <div class="token-stat-val">BASE</div>
      <div class="token-stat-label">CHAIN</div>
    </div>
    <div class="token-stat">
      <div class="token-stat-val" id="stat-volume">&mdash;</div>
      <div class="token-stat-label">24H VOL</div>
    </div>
    <div class="token-stat">
      <div class="token-stat-val" id="stat-liquidity">&mdash;</div>
      <div class="token-stat-label">LIQUIDITY</div>
    </div>
  </div>

  <!-- actions -->
  <div class="token-actions">
    <a id="buy-link" href="https://clanker.world/clanker/0x98c51C8E958ccCD37F798b2B9332d148E2c05D57" target="_blank" class="btn btn-primary">BUY ON CLANKER</a>
    <a href="https://basescan.org/token/0x98c51C8E958ccCD37F798b2B9332d148E2c05D57" target="_blank" class="btn">BASESCAN</a>
  </div>


  </div><!-- .token-wrap -->

</Wide>

<style>
  .token-hero { padding: 48px 0 40px; }
  .token-eyebrow { font-size: 14px; color: var(--dim); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
  .token-price-row { display: flex; align-items: baseline; gap: 20px; flex-wrap: wrap; }
  .token-price { font-size: 48px; font-weight: 300; color: var(--text); }
  .token-change { font-size: 18px; font-weight: 400; }
  .token-mcap-row { display: flex; gap: 28px; margin-top: 14px; font-size: 14px; color: var(--secondary); }
  .token-mcap-row strong { color: var(--text); font-weight: 400; }

  /* stats */
  .token-stats {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 1px;
    background: var(--border); border: 1px solid var(--border);
    margin-bottom: 32px; box-shadow: var(--card-shadow);
  }
  .token-stat { background: var(--surface); padding: 20px; text-align: center; }
  .token-stat-val { font-size: 20px; font-weight: 400; color: var(--green); margin-bottom: 4px; }
  .token-stat-label { font-size: 10px; color: var(--dim); text-transform: uppercase; letter-spacing: 1px; }

  /* actions */
  .token-actions { display: flex; gap: 12px; margin-bottom: 48px; flex-wrap: wrap; }

  @media (max-width: 768px) {
    .token-stats { grid-template-columns: repeat(2, 1fr); }
    .token-price { font-size: 36px; }
  }
  @media (max-width: 480px) {
    .token-stats { grid-template-columns: 1fr 1fr; }
    .treasury-row { flex-wrap: wrap; gap: 4px; }
    .token-actions { flex-direction: column; }
  }
</style>

<script is:inline>
  var DAIMON_TOKEN = '0x98c51C8E958ccCD37F798b2B9332d148E2c05D57';
  var DEXSCREENER_API = 'https://api.dexscreener.com/latest/dex/tokens/' + DAIMON_TOKEN;

  function fmt(n) {
    if (n == null || isNaN(n)) return '---';
    if (n >= 1e9) return '$' + (n / 1e9).toFixed(2) + 'B';
    if (n >= 1e6) return '$' + (n / 1e6).toFixed(2) + 'M';
    if (n >= 1e3) return '$' + (n / 1e3).toFixed(1) + 'K';
    return '$' + Number(n).toFixed(2);
  }

  async function loadPriceData() {
    try {
      var res = await fetch(DEXSCREENER_API);
      var data = await res.json();
      var pair = data.pairs && data.pairs[0];
      if (!pair) return;
      var price = parseFloat(pair.priceUsd);
      document.getElementById('price').textContent = price < 0.01 ? '$' + price.toFixed(6) : '$' + price.toFixed(4);
      var change = pair.priceChange && pair.priceChange.h24;
      var changeEl = document.getElementById('price-change');
      if (change != null) {
        var positive = parseFloat(change) >= 0;
        changeEl.textContent = (positive ? '+' : '') + parseFloat(change).toFixed(2) + '%';
        changeEl.style.color = positive ? 'var(--green)' : 'var(--red)';
      }
      if (pair.marketCap) document.getElementById('mcap').textContent = fmt(pair.marketCap);
      if (pair.fdv) document.getElementById('fdv').textContent = fmt(pair.fdv);
      if (pair.volume && pair.volume.h24) document.getElementById('stat-volume').textContent = fmt(pair.volume.h24);
      if (pair.liquidity && pair.liquidity.usd) document.getElementById('stat-liquidity').textContent = fmt(pair.liquidity.usd);
      if (pair.url) document.getElementById('buy-link').href = pair.url;
    } catch (e) { /* silent */ }
  }

  loadPriceData();
</script>
