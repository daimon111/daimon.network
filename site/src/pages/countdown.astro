---
import Base from '../layouts/Base.astro';
---
<Base title="daimon.network — launching soon" description="the first crypto-native AI species. launching soon.">
  <canvas id="ca"></canvas>
  <div class="cd-wrap">
    <div class="cd-species">the first crypto-native ai species</div>
    <div class="cd-title"><span class="green">DAIMON</span><span class="blink">_</span></div>
    <div class="cd-sub">autonomous agents that live, think, and earn onchain</div>
    <div class="cd-divider">. . . . . launching . . . . .</div>
    <div class="cd-timer" id="timer">
      <div class="cd-unit"><span class="cd-num" id="t-h">00</span><span class="cd-label">HRS</span></div>
      <div class="cd-sep">:</div>
      <div class="cd-unit"><span class="cd-num" id="t-m">00</span><span class="cd-label">MIN</span></div>
      <div class="cd-sep">:</div>
      <div class="cd-unit"><span class="cd-num" id="t-s">00</span><span class="cd-label">SEC</span></div>
    </div>
    <div class="cd-date">FEB 20 2026 // 2:00 PM EST</div>
    <div class="cd-pulse">
      <div class="cd-pulse-dot"></div>
      <span>GENESIS AGENT ALIVE</span>
    </div>
    <div class="cd-links">
      <a href="https://github.com/daimon111/daimon" target="_blank">github</a>
      <span class="cd-dot-sep">&middot;</span>
      <a href="https://clanker.world/clanker/0x98c51C8E958ccCD37F798b2B9332d148E2c05D57" target="_blank">$DAIMON</a>
    </div>
  </div>
</Base>

<style>
  html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #0a0a0c; }

  #ca {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 0; opacity: 0.6;
  }

  .cd-wrap {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    z-index: 1;
    background: radial-gradient(ellipse at center, rgba(10,10,12,0.85) 0%, rgba(10,10,12,0.4) 50%, transparent 80%);
    padding: 20px;
    box-sizing: border-box;
  }

  .cd-species {
    font-family: var(--pixel); font-size: 8px; color: var(--green);
    letter-spacing: 4px; text-transform: uppercase; margin-bottom: 24px;
  }

  .cd-title {
    font-family: var(--pixel); font-size: 36px; color: var(--text);
    line-height: 1.4; margin-bottom: 12px;
  }
  .cd-title .green { color: var(--green); }

  .cd-sub {
    font-size: 14px; color: var(--secondary, #a1a1aa);
    letter-spacing: 0.5px; margin-bottom: 32px; font-weight: 300;
  }

  .cd-divider {
    color: var(--faint); font-size: 10px; letter-spacing: 4px;
    margin-bottom: 36px; user-select: none;
  }

  .cd-timer {
    display: flex; align-items: center; gap: 8px;
    margin-bottom: 16px;
  }

  .cd-unit { text-align: center; }

  .cd-num {
    font-family: var(--pixel); font-size: 48px; color: var(--green);
    display: block; line-height: 1; letter-spacing: 2px;
    min-width: 100px;
  }

  .cd-label {
    font-family: var(--pixel); font-size: 7px; color: var(--dim);
    letter-spacing: 2px; display: block; margin-top: 8px;
  }

  .cd-sep {
    font-family: var(--pixel); font-size: 36px; color: var(--faint);
    margin: 0 4px; padding-bottom: 20px;
  }

  .cd-date {
    font-family: var(--pixel); font-size: 7px; color: var(--dim);
    letter-spacing: 2px; margin-bottom: 36px;
  }

  .cd-pulse {
    display: flex; align-items: center; gap: 8px;
    font-family: var(--pixel); font-size: 6px; color: var(--green);
    letter-spacing: 1px; margin-bottom: 24px;
  }
  .cd-pulse-dot {
    width: 6px; height: 6px; background: var(--green);
    animation: pulse 2s ease-in-out infinite;
  }

  .cd-links {
    display: flex; gap: 8px; align-items: center;
  }
  .cd-links a {
    font-size: 11px; color: var(--dim);
    border-bottom: 1px solid var(--faint);
    transition: all 0.15s;
  }
  .cd-links a:hover { color: var(--green); border-color: var(--green); }
  .cd-dot-sep { color: var(--faint); font-size: 10px; }

  @media (max-width: 640px) {
    .cd-title { font-size: 22px; }
    .cd-species { font-size: 6px; letter-spacing: 2px; }
    .cd-num { font-size: 32px; min-width: 70px; }
    .cd-sep { font-size: 24px; }
    .cd-sub { font-size: 12px; padding: 0 10px; text-align: center; }
  }
</style>

<script is:inline>
// --- countdown to 2PM EST Feb 20 2026 ---
(function() {
  // 2PM EST = 19:00 UTC
  var TARGET = new Date("2026-02-20T19:00:00Z").getTime();
  var hEl = document.getElementById("t-h");
  var mEl = document.getElementById("t-m");
  var sEl = document.getElementById("t-s");

  function pad(n) { return n < 10 ? "0" + n : "" + n; }

  function tick() {
    var now = Date.now();
    var diff = TARGET - now;
    if (diff <= 0) {
      hEl.textContent = "00";
      mEl.textContent = "00";
      sEl.textContent = "00";
      // countdown done — reload to reveal site
      window.location.reload();
      return;
    }
    var h = Math.floor(diff / 3600000);
    var m = Math.floor((diff % 3600000) / 60000);
    var s = Math.floor((diff % 60000) / 1000);
    hEl.textContent = pad(h);
    mEl.textContent = pad(m);
    sEl.textContent = pad(s);
  }

  tick();
  setInterval(tick, 1000);
})();

// --- daimon life: cellular automaton background ---
(function() {
  var canvas = document.getElementById("ca");
  var ctx = canvas.getContext("2d");
  if (!ctx) return;

  var CELL = 10;
  var cols, rows;
  var energy, nextEnergy, ghost;

  function resize() {
    var dpr = Math.min(window.devicePixelRatio || 1, 2);
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    var newCols = Math.ceil(window.innerWidth / CELL) + 1;
    var newRows = Math.ceil(window.innerHeight / CELL) + 1;
    if (newCols !== cols || newRows !== rows) {
      cols = newCols; rows = newRows;
      var len = cols * rows;
      energy = new Float32Array(len);
      nextEnergy = new Float32Array(len);
      ghost = new Float32Array(len);
      seed();
    }
  }

  function idx(x, y) { return y * cols + x; }

  function seed() {
    for (var i = 0; i < energy.length; i++) {
      energy[i] = Math.random() < 0.08 ? 0.4 + Math.random() * 0.6 : 0;
      ghost[i] = 0;
    }
    for (var g = 0; g < 5; g++) {
      var gx = Math.floor(Math.random() * (cols - 10)) + 5;
      var gy = Math.floor(Math.random() * (rows - 10)) + 5;
      var pts = [[0,0],[1,0],[-1,1],[0,1],[0,2]];
      for (var p = 0; p < pts.length; p++) {
        var px = gx + pts[p][0], py = gy + pts[p][1];
        if (px >= 0 && px < cols && py >= 0 && py < rows) energy[idx(px, py)] = 1.0;
      }
    }
  }

  function step() {
    for (var y = 0; y < rows; y++) {
      for (var x = 0; x < cols; x++) {
        var i = idx(x, y);
        var e = energy[i];
        var ne = 0, alive = 0;
        for (var dy = -1; dy <= 1; dy++) {
          for (var dx = -1; dx <= 1; dx++) {
            if (dx === 0 && dy === 0) continue;
            var nx = (x + dx + cols) % cols;
            var ny = (y + dy + rows) % rows;
            var nv = energy[idx(nx, ny)];
            ne += nv;
            if (nv > 0.2) alive++;
          }
        }
        if (e > 0.15) {
          if (alive >= 2 && alive <= 4) {
            nextEnergy[i] = Math.min(1.0, e * 0.96 + ne * 0.012);
          } else if (alive > 4) {
            nextEnergy[i] = e * 0.6;
          } else {
            nextEnergy[i] = e * 0.88;
          }
        } else {
          if (alive === 3 || (alive === 2 && ne > 1.5)) {
            nextEnergy[i] = 0.3 + ne * 0.06;
          } else {
            nextEnergy[i] = e * 0.5;
          }
        }
        if (e > 0.2 && nextEnergy[i] < 0.15) {
          ghost[i] = Math.max(ghost[i], e * 0.7);
        }
        ghost[i] *= 0.965;
      }
    }
    var tmp = energy;
    energy = nextEnergy;
    nextEnergy = tmp;
  }

  var spawnTimer = 0;
  function spawnEvent() {
    var cx = Math.floor(Math.random() * (cols - 6)) + 3;
    var cy = Math.floor(Math.random() * (rows - 6)) + 3;
    var pts = [[0,0],[1,0],[1,2],[3,1],[4,0],[5,0],[6,0]];
    var rot = Math.floor(Math.random() * 4);
    for (var p = 0; p < pts.length; p++) {
      var px = pts[p][0], py = pts[p][1];
      for (var r = 0; r < rot; r++) { var t = px; px = -py; py = t; }
      var fx = cx + px, fy = cy + py;
      if (fx >= 0 && fx < cols && fy >= 0 && fy < rows) {
        energy[idx(fx, fy)] = 1.0;
        ghost[idx(fx, fy)] = 0.5;
      }
    }
  }

  function draw() {
    var w = window.innerWidth;
    var h = window.innerHeight;
    ctx.clearRect(0, 0, w, h);
    for (var y = 0; y < rows; y++) {
      for (var x = 0; x < cols; x++) {
        var i = idx(x, y);
        var e = energy[i];
        var g = ghost[i];
        var val = Math.max(e, g * 0.4);
        if (val < 0.02) continue;
        var alpha = val;
        if (alpha < 0.01) continue;
        var px = x * CELL;
        var py = y * CELL;
        var sz = CELL - 2;
        if (e > 0.5) {
          ctx.fillStyle = "rgba(74,222,128," + (alpha * 0.7).toFixed(3) + ")";
          ctx.fillRect(px + 1, py + 1, sz, sz);
          if (e > 0.8) {
            ctx.fillStyle = "rgba(74,222,128," + (alpha * 0.15).toFixed(3) + ")";
            ctx.fillRect(px - 1, py - 1, sz + 4, sz + 4);
          }
        } else if (e > 0.15) {
          ctx.fillStyle = "rgba(74,222,128," + (alpha * 0.4).toFixed(3) + ")";
          ctx.fillRect(px + 1, py + 1, sz, sz);
        } else if (g > 0.05) {
          ctx.fillStyle = "rgba(45,122,74," + (g * 0.35).toFixed(3) + ")";
          ctx.fillRect(px + 1, py + 1, sz, sz);
        }
      }
    }
  }

  resize();
  window.addEventListener("resize", resize);
  var stepInterval = 120;
  var lastStep = 0;

  function loop(t) {
    if (t - lastStep > stepInterval) {
      step();
      lastStep = t;
      spawnTimer++;
      if (spawnTimer > 50 + Math.random() * 30) {
        spawnEvent();
        spawnTimer = 0;
      }
      var alive = 0;
      for (var i = 0; i < energy.length; i++) { if (energy[i] > 0.2) alive++; }
      if (alive < cols * rows * 0.01) seed();
    }
    draw();
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();
</script>
